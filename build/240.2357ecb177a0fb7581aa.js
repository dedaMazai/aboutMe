"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[240],{8240:(e,n,a)=>{a.r(n),a.d(n,{default:()=>$});var r,t=a(5893);!function(e){e.INCORRECT_USER_DATA="INCORRECT_USER_DATA",e.INCORRECT_AGE="INCORRECT_AGE",e.INCORRECT_COUNTRY="INCORRECT_COUNTRY",e.NO_DATA="NO_DATA",e.SERVER_ERROR="SERVER_ERROR"}(r||(r={}));var o,l=a(7168),i=(0,l.hg)("profile/fetchProfileData",(function(e,n){return a=void 0,r=void 0,o=function(){var a,r,t,o;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,r&&(t=2&o[0]?r.return:o[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,o[1])).done)return t;switch(r=0,t&&(o=[2&o[0],t.value]),o[0]){case 0:case 1:t=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!t||o[1]>t[0]&&o[1]<t[3])){l.label=o[1];break}if(6===o[0]&&l.label<t[1]){l.label=t[1],t=o;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(o);break}t[2]&&l.ops.pop(),l.trys.pop();continue}o=n.call(e,l)}catch(e){o=[6,e],r=0}finally{a=t=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}(this,(function(l){switch(l.label){case 0:a=n.extra,r=n.rejectWithValue,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,a.api.get("/profile/".concat(e))];case 2:if(!(t=l.sent()).data)throw new Error;return[2,t.data];case 3:return o=l.sent(),console.log(o),[2,r("ERROR")];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function l(e){try{u(o.next(e))}catch(e){n(e)}}function i(e){try{u(o.throw(e))}catch(e){n(e)}}function u(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t((function(e){e(a)}))).then(l,i)}u((o=o.apply(a,r||[])).next())}));var a,r,t,o})),u=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.form},c=(0,l.hg)("profile/updateProfileData",(function(e,n){return a=void 0,t=void 0,l=function(){var e,a,t,o,l,i,c;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,r&&(t=2&o[0]?r.return:o[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,o[1])).done)return t;switch(r=0,t&&(o=[2&o[0],t.value]),o[0]){case 0:case 1:t=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!t||o[1]>t[0]&&o[1]<t[3])){l.label=o[1];break}if(6===o[0]&&l.label<t[1]){l.label=t[1],t=o;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(o);break}t[2]&&l.ops.pop(),l.trys.pop();continue}o=n.call(e,l)}catch(e){o=[6,e],r=0}finally{a=t=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}(this,(function(s){switch(s.label){case 0:if(e=n.extra,a=n.rejectWithValue,t=n.getState,o=u(t()),(l=function(e){if(!e)return[r.NO_DATA];var n=e.first,a=e.lastname,t=e.age,o=e.country,l=[];return n&&a||l.push(r.INCORRECT_USER_DATA),t&&Number.isInteger(t)||l.push(r.INCORRECT_AGE),o||l.push(r.INCORRECT_COUNTRY),l}(o)).length)return[2,a(l)];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.api.put("/profile/".concat(null==o?void 0:o.id),o)];case 2:if(!(i=s.sent()).data)throw new Error;return[2,i.data];case 3:return c=s.sent(),console.log(c),[2,a([r.SERVER_ERROR])];case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,n){function r(e){try{u(l.next(e))}catch(e){n(e)}}function i(e){try{u(l.throw(e))}catch(e){n(e)}}function u(n){var a;n.done?e(n.value):(a=n.value,a instanceof o?a:new o((function(e){e(a)}))).then(r,i)}u((l=l.apply(a,t||[])).next())}));var a,t,o,l})),s=function(){return s=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},s.apply(this,arguments)},d=(0,l.oM)({name:"profile",initialState:{readonly:!0,isLoading:!1,error:void 0,data:void 0},reducers:{setReadonly:function(e,n){e.readonly=n.payload},cancelEdit:function(e){e.readonly=!0,e.form=e.data,e.validateErrors=void 0},updateProfile:function(e,n){e.form=s(s({},e.data),n.payload)}},extraReducers:function(e){e.addCase(i.pending,(function(e,n){e.error=void 0,e.isLoading=!0})).addCase(i.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload})).addCase(i.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload})).addCase(c.pending,(function(e,n){e.error=void 0,e.isLoading=!0})).addCase(c.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload,e.readonly=!0,e.validateErrors=void 0})).addCase(c.rejected,(function(e,n){e.isLoading=!1,e.validateErrors=n.payload}))}}),f=d.actions,v=d.reducer,h=a(2327),p=a(4611),y=a(71),g=a(1604),m=a(8077),C=a(4809),R=a(7294),b=a(7808);!function(e){e.RUB="RUB",e.EUR="EUR",e.USD="USD"}(o||(o={}));var N,x=[{value:o.RUB,content:o.RUB},{value:o.EUR,content:o.EUR},{value:o.USD,content:o.USD}],O=(0,R.memo)((function(e){var n=e.className,a=e.value,r=e.onChange,o=e.readonly,l=(0,h.$)("profile").t,i=(0,R.useCallback)((function(e){null==r||r(e)}),[r]);return(0,t.jsx)(b.P,{className:(0,p.A)("",{},[n]),label:l("Choose a currency"),options:x,value:a,onChange:i,readonly:o})}));!function(e){e.Russia="Russia",e.Belarus="Belarus",e.Ukraine="Ukraine",e.Kazakhstan="Kazakhstan",e.Armenia="Armenia"}(N||(N={}));var j=[{value:N.Armenia,content:N.Armenia},{value:N.Belarus,content:N.Belarus},{value:N.Kazakhstan,content:N.Kazakhstan},{value:N.Russia,content:N.Russia},{value:N.Ukraine,content:N.Ukraine}],E=(0,R.memo)((function(e){var n=e.className,a=e.value,r=e.onChange,o=e.readonly,l=(0,h.$)("profile").t,i=(0,R.useCallback)((function(e){null==r||r(e)}),[r]);return(0,t.jsx)(b.P,{className:(0,p.A)("",{},[n]),label:l("Choose a country"),options:j,value:a,onChange:i,readonly:o})}));const w="wW9jgKKD",A="ZTyX8_n9";var k=function(){return k=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},k.apply(this,arguments)},T=function(e){var n,a,r=(0,h.$)("profile").t,o=e.className,l=e.isLoading,i=e.error,u=e.data,c=e.readOnly,s=e.onChangeFirstname,d=e.onChangeLastname,f=e.onChangeAge,v=e.onChangeCity,R=e.onChangeUsername,b=e.onChangeAvatar,N=e.onChangeCurrency,x=e.onChangeCountry;if(l)return(0,t.jsx)("div",k({className:(0,p.A)(w,(n={},n.t07ZxFGs=!0,n),[o])},{children:(0,t.jsx)(m.a,{})}));if(i)return(0,t.jsx)("div",k({className:(0,p.A)(w,{},[o,"i5YK3SSb"])},{children:(0,t.jsx)(C.xv,{theme:C.lg.ERROR,title:r("error.loadProfile"),text:r("error.refreshPage"),align:C.PH.CENTER})}));var j=((a={}).DjTe7269=!c,a);return(0,t.jsx)("div",k({className:(0,p.A)(w,j,[o])},{children:(0,t.jsxs)("div",k({className:"mem1neCT"},{children:[(null==u?void 0:u.avatar)&&(0,t.jsx)("div",k({className:"bEFNSahN"},{children:(0,t.jsx)(y.q,{alt:"avatar",src:null==u?void 0:u.avatar})})),(0,t.jsx)(g.I,{value:null==u?void 0:u.first,placeholder:r("Your name"),className:A,onChange:s,readonly:c}),(0,t.jsx)(g.I,{value:null==u?void 0:u.lastname,placeholder:r("Your surname"),className:A,onChange:d,readonly:c}),(0,t.jsx)(g.I,{value:null==u?void 0:u.age,placeholder:r("Your age"),className:A,onChange:f,readonly:c}),(0,t.jsx)(g.I,{value:null==u?void 0:u.city,placeholder:r("City"),className:A,onChange:R,readonly:c}),(0,t.jsx)(g.I,{value:null==u?void 0:u.username,placeholder:r("Yor username"),className:A,onChange:v,readonly:c}),(0,t.jsx)(g.I,{value:null==u?void 0:u.avatar,placeholder:r("Input url avatar"),className:A,onChange:b,readonly:c}),(0,t.jsx)(O,{className:A,value:null==u?void 0:u.currency,onChange:N,readonly:c}),(0,t.jsx)(E,{className:A,value:null==u?void 0:u.country,onChange:x,readonly:c})]}))}))},P=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.data},U=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.error},I=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.isLoading},S=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.readonly},_=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.validateErrors},D=a(5998),L=a(9250),B=a(1150),Y=a(5461),F=a(2276),K=a(8815),z=a(8204),G=a(9161);const H={ProfilePageHeader:"FPJSgL1_",editBtn:"vP5lJqeW",btnsWrapper:"RSsPrFbn"};var W=function(){return W=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},W.apply(this,arguments)},M=function(e){var n=e.className,a=(0,h.$)("profile").t,r=(0,D.v9)(z.m5),o=(0,D.v9)(P),l=(null==r?void 0:r.id)===(null==o?void 0:o.id),i=(0,D.v9)(S),u=(0,Y.T)(),s=(0,R.useCallback)((function(){u(f.setReadonly(!1))}),[u]),d=(0,R.useCallback)((function(){u(f.cancelEdit())}),[u]),v=(0,R.useCallback)((function(){u(c())}),[u]);return(0,t.jsxs)("div",W({className:(0,p.A)(H.ProfilePageHeader,{},[n])},{children:[(0,t.jsx)(C.xv,{title:a("profile")}),l&&(0,t.jsx)("div",W({className:H.btnsWrapper},{children:i?(0,t.jsx)(G.zx,W({className:H.editBtn,theme:G.UH.OUTLINE,onClick:s},{children:a("edit")})):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G.zx,W({className:H.editBtn,theme:G.UH.OUTLINE_RED,onClick:d},{children:a("esc")})),(0,t.jsx)(G.zx,W({className:H.saveBtn,theme:G.UH.OUTLINE,onClick:v},{children:a("save")}))]})}))]}))},V=function(){return V=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},V.apply(this,arguments)},q={profile:v};const $=function(e){var n,a=e.className,o=(0,h.$)("profile").t,l=(0,Y.T)(),c=(0,D.v9)(u),s=(0,D.v9)(U),d=(0,D.v9)(I),v=(0,D.v9)(S),y=(0,D.v9)(_),g=(0,L.UO)().id,m=((n={})[r.SERVER_ERROR]=o("Server error"),n[r.INCORRECT_AGE]=o("Incorrect age"),n[r.INCORRECT_COUNTRY]=o("Incorrect country"),n[r.INCORRECT_USER_DATA]=o("Incorrect data"),n[r.NO_DATA]=o("No data"),n);(0,F.Q)((function(){g&&l(i(g))}));var b=(0,R.useCallback)((function(e){l(f.updateProfile({first:e}))}),[l]),N=(0,R.useCallback)((function(e){l(f.updateProfile({lastname:e}))}),[l]),x=(0,R.useCallback)((function(e){l(f.updateProfile({city:e}))}),[l]),O=(0,R.useCallback)((function(e){Number(e||0)&&l(f.updateProfile({age:Number(e||0)}))}),[l]),j=(0,R.useCallback)((function(e){l(f.updateProfile({username:e||""}))}),[l]),E=(0,R.useCallback)((function(e){l(f.updateProfile({avatar:e||""}))}),[l]),w=(0,R.useCallback)((function(e){l(f.updateProfile({currency:e}))}),[l]),A=(0,R.useCallback)((function(e){l(f.updateProfile({country:e}))}),[l]);return(0,t.jsx)(B.W,V({reducers:q,removeAfterUnmount:!0},{children:(0,t.jsxs)(K.T,V({className:(0,p.A)("",{},[a])},{children:[(0,t.jsx)(M,{}),(null==y?void 0:y.length)&&y.map((function(e){return(0,t.jsx)(C.xv,{theme:C.lg.ERROR,text:m[e]},e)})),(0,t.jsx)(T,{data:c,isLoading:d,error:s,onChangeFirstname:b,onChangeLastname:N,readOnly:v,onChangeAge:O,onChangeCity:x,onChangeUsername:j,onChangeAvatar:E,onChangeCurrency:w,onChangeCountry:A})]}))}))}},1150:(e,n,a)=>{a.d(n,{W:()=>l});var r=a(5893),t=a(7294),o=a(5998),l=function(e){var n=e.children,a=e.reducers,l=e.removeAfterUnmount,i=void 0===l||l,u=(0,o.I0)(),c=(0,o.oR)();return(0,t.useEffect)((function(){var e=c.reducerManager.getMountedReducers();return Object.entries(a).forEach((function(n){var a=n[0],r=n[1];e[a]||(c.reducerManager.add(a,r),u({type:"@INIT ".concat(a," reducer")}))})),function(){i&&Object.entries(a).forEach((function(e){var n=e[0];e[1],c.reducerManager.remove(n),u({type:"@DESTROY ".concat(n," reducer")})}))}}),[]),(0,r.jsx)(r.Fragment,{children:n})}},71:(e,n,a)=>{a.d(n,{q:()=>l});var r=a(5893),t=a(7294),o=a(4611);var l=function(e){var n=e.className,a=e.src,l=e.size,i=e.alt,u=(0,t.useMemo)((function(){return{width:l||100,height:l||100}}),[l]);return(0,r.jsx)("img",{src:a,alt:i,style:u,className:(0,o.A)("ZqPdwJxd",{},[n])})}},7808:(e,n,a)=>{a.d(n,{P:()=>u});var r=a(5893),t=a(7294),o=a(2327),l=a(4611);var i=function(){return i=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},i.apply(this,arguments)},u=function(e){var n=e.className,a=e.label,u=e.options,c=e.value,s=e.onChange,d=e.readonly,f=(0,t.useMemo)((function(){return null==u?void 0:u.map((function(e){return(0,r.jsx)("option",i({className:"JkXz98qY",value:e.value},{children:e.content}),e.value)}))}),[u]);return(0,o.$)().t,(0,r.jsxs)("div",i({className:(0,l.A)("cidfdn6H",{},[n])},{children:[a&&(0,r.jsx)("span",i({className:"G1uuf7Bp"},{children:"".concat(a,">")})),(0,r.jsx)("select",i({className:"VOKOuKGo",value:c,onChange:function(e){null==s||s(e.target.value)},disabled:d},{children:f}))]}))}},1604:(e,n,a)=>{a.d(n,{I:()=>i});var r=a(5893),t=a(4611),o=a(7294);var l=function(){return l=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},l.apply(this,arguments)},i=(0,o.memo)((function(e){var n,a=e.className,i=e.value,u=e.onChange,c=e.type,s=void 0===c?"text":c,d=e.placeholder,f=e.autofocus,v=e.readonly,h=function(e,n){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)n.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(e,r[t])&&(a[r[t]]=e[r[t]])}return a}(e,["className","value","onChange","type","placeholder","autofocus","readonly"]),p=(0,o.useRef)(null),y=(0,o.useState)(!1),g=y[0],m=y[1],C=(0,o.useState)(0),R=C[0],b=C[1],N=g&&!v;(0,o.useEffect)((function(){var e;f&&(m(!0),null===(e=p.current)||void 0===e||e.focus())}),[f]);var x=((n={}).Yyx3bQmK=v,n);return(0,r.jsxs)("div",l({className:(0,t.A)("HQN3rnsq",x,[a])},{children:[d&&(0,r.jsx)("div",l({className:"mFYZ4u2F"},{children:"".concat(d,">")})),(0,r.jsxs)("div",l({className:"g864HExk"},{children:[(0,r.jsx)("input",l({ref:p,type:s,value:i,onChange:function(e){null==u||u(e.target.value),b(e.target.value.length)},className:"Kd1arsrr",readOnly:v,onFocus:function(){m(!0)},onBlur:function(){m(!1)},onSelect:function(e){var n;b((null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.selectionStart)||0)}},h)),N&&(0,r.jsx)("span",{className:"CF_3WtDi",style:{left:"".concat(8.1*R,"px")}})]}))]}))}))}}]);